# Useful reference: https://github.com/google/iree/blob/master/.bazelrc
# build config
build --compilation_mode=fastbuild
build --verbose_failures
build --noshow_progress
build --action_env=PATH
build --action_env=PYTHON_BIN_PATH
# Enable build:windows, build:linux, build:macos, build:freebsd
build --enable_platform_specific_config
# Warnings should be errors
build --per_file_copt=-src/ray/thirdparty/hiredis/dict.c,-.*/arrow/util/logging.cc@-Werror
# Ignore warnings for protobuf generated files and external projects.
build --per_file_copt='\\.pb\\.cc$@-w'
build --per_file_copt='external*@-w'
# This workaround is needed due to https://github.com/bazelbuild/bazel/issues/4341
build --per_file_copt="external/com_github_grpc_grpc/.*@-DGRPC_BAZEL_BUILD"
# This workaround is needed to suppress hermetic build warnings (e.g. #define __DATE__ "redacted")
build --per_file_copt="external/com_github_grpc_grpc/.*@-Wno-builtin-macro-redefined"
build --per_file_copt="external/com_github_google_flatbuffers/.*@-Wno-builtin-macro-redefined"
build --http_timeout_scaling=5.0
# This workaround is needed to avoid a duplicate definition error for struct pollfd in civetweb
build --per_file_copt=external/civetweb\\w*/src/civetweb\\.c@-D_WIN32_WINNT=0x0502
